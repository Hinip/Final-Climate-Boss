<!DOCTYPE html>
<html>
    <head>
        <title>sum</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/sum.css') }}">
    </head>
    <body>
        <img src="/static/images/general/here.png" class="button_here_3" onclick="ir()">
        <script>
            function ir() {
                window.location.href = "/middle";
            }
        </script>
        <a class="r_text_3">Medio</a>
    
        <h1>Juntar</h1>

        <select id="combo1" class = "combo1"></select>
        <select id="combo2" class = "combo2"></select>

        <button onclick="sumar()" class = b_sum>Sumar</button>

        <p id="resultado"></p>
        <script>
        window.onload = function () {

            let preguntas = JSON.parse(localStorage.getItem("preguntas")) || [];
            let respuestas = JSON.parse(localStorage.getItem("respuestas")) || [];

            let combo1 = document.getElementById("combo1");
            let combo2 = document.getElementById("combo2");

            preguntas.forEach(p => {
                let op = document.createElement("option");
                op.textContent = p.text;
                op.value = p.id; // üëà ID oculto
                combo1.appendChild(op);
            });

            respuestas.forEach(r => {
                let op = document.createElement("option");
                op.textContent = r.text;
                op.value = r.id; // üëà ID oculto
                combo2.appendChild(op);
            });
        };
        </script>

        <script>
            function sumar() {
                let p = document.getElementById("combo1").value;
                let r = document.getElementById("combo2").value;

                if (p === r && vidas > 0) {
                    document.getElementById("resultado").textContent = "‚úÖ Correcto";
                } else if (p !== r && vidas > 0) {
                    document.getElementById("resultado").textContent = "‚ùå Incorrecto";
                    perderVida();
                } else {
                    document.getElementById("resultado").textContent = "Ingrese una selecci√≥n v√°lida";
                }
            }
        </script>

        <script>
            if (localStorage.getItem("vidas") === null) {
                localStorage.setItem("vidas", 3);
            }
        </script>
        <p id="vidas"></p>
        <script>
            function actualizarVidas() {
                document.getElementById("vidas").textContent =
                    "‚ù§Ô∏è Vidas: " + localStorage.getItem("vidas");
            }

            actualizarVidas();
    </script>
    <script>
        function perderVida() {
            let vidas = parseInt(localStorage.getItem("vidas"));
            vidas--;

            localStorage.setItem("vidas", vidas);
            actualizarVidas();

            if (vidas <= 0) {
                alert("üíÄ GAME OVER");
                localStorage.clear();
                localStorage.setItem("vidas", 3); // reinicio
                window.location.href = "/";
            }
        }
    </script>

    </body>
</html>